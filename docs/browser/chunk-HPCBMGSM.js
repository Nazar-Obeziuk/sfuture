import{a as de,c as me,d as _e,e as pe,g as K,h as ge}from"./chunk-47BF6OCE.js";import{a as se,b as q}from"./chunk-YZAOB4T7.js";import{a as oe}from"./chunk-E4ASYMHY.js";import{a as D,b as f,c as N,d as U,e as j,f as re,g as G,h as z,i as ae,j as ce,k as le,l as B,m as $}from"./chunk-JIYL2G2E.js";import"./chunk-5EGWKPCX.js";import{$ as h,A as p,Aa as te,B as g,Fa as ie,Ha as ne,K as P,Ka as J,Q as s,R as y,W as u,_ as F,aa as O,ba as M,c as W,ca as I,da as n,ea as o,fa as x,ia as C,la as m,ma as d,oa as c,pa as b,q as X,qa as k,r as A,sa as S,t as Y,ua as Z,v as E,va as ee,w as T}from"./chunk-QJIXC3RR.js";var ue=(()=>{let t=class t{logout(){}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=E({type:t,selectors:[["app-admin"]],standalone:!0,features:[S],decls:11,vars:0,consts:[[1,"container"],[1,"admin__wrapper"],[1,"admin__wrapper_items"],["routerLink","exercise","routerLinkActive","admin__item_active","type","button",1,"admin__item_btn"],["routerLink","category","routerLinkActive","admin__item_active","type","button",1,"admin__item_btn"],["type","button",1,"admin__exit",3,"click"],[1,"admin__wrapper_content"]],template:function(a,l){a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),c(4,"Exercise"),o(),n(5,"button",4),c(6,"Category"),o(),n(7,"button",5),m("click",function(){return l.logout()}),c(8,"Exit"),o()(),n(9,"div",6),x(10,"router-outlet"),o()()())},dependencies:[ie,ne],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{box-sizing:border-box;height:100%}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:inherit;margin:0;padding:0;font-family:Comfortaa,sans-serif}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%], ol[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}.container[_ngcontent-%COMP%]{max-width:100%;margin:0 auto;padding:30px}.admin__wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:40px}.admin__wrapper_items[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:20px}.admin__exit[_ngcontent-%COMP%], .admin__item_btn[_ngcontent-%COMP%]{width:140px;height:42px;background:#007EFE;border:none;border-radius:6px;font-size:20px;color:#fff;cursor:pointer;outline:none}.admin__item_active[_ngcontent-%COMP%]{border:none;border-top:5px solid #007EFE;font-weight:700;color:#212121;outline:none}"]});let i=t;return i})();var L=(()=>{let t=class t{constructor(e){this.storage=e,this.uploadPercent=0}uploadFile(e,a,l){return W(this,null,function*(){let _=`${e}/${a}`,w="";if(l)try{let v=K(this.storage,_),Q=ge(v,l);me(Q).subscribe(he=>{this.uploadPercent=he.progress}),yield Q,w=yield pe(v)}catch(v){console.error(v)}else console.log("wrong formatt of file");return Promise.resolve(w)})}deleteUploadFile(e){let a=K(this.storage,e);return _e(a)}valueByControl(e){throw new Error("Method not implemented.")}};t.\u0275fac=function(a){return new(a||t)(Y(de))},t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function ye(i,t){if(i&1&&(n(0,"option",22),c(1),o()),i&2){let r=t.$implicit;u("ngValue",r),s(1),b(r.name)}}function ve(i,t){if(i&1){let r=C();n(0,"div",23)(1,"input",24),m("change",function(a){p(r);let l=d(2);return g(l.uploadImage(a))}),o()()}}function Ee(i,t){if(i&1){let r=C();n(0,"div",25),x(1,"img",26),n(2,"button",27),m("click",function(){p(r);let a=d(2);return g(a.deleteImage())}),c(3,"Delete"),o()()}if(i&2){let r=d(2);s(1),u("src",r.valueByControl("imagePath"),P)}}function Se(i,t){if(i&1){let r=C();n(0,"div",23)(1,"input",24),m("change",function(a){p(r);let l=d(2);return g(l.uploadGifImage(a))}),o()()}}function we(i,t){if(i&1){let r=C();n(0,"div",25),x(1,"img",26),n(2,"button",27),m("click",function(){p(r);let a=d(2);return g(a.deleteGifImage())}),c(3,"Delete"),o()()}if(i&2){let r=d(2);s(1),u("src",r.valueByControl("gifImagePath"),P)}}function Pe(i,t){if(i&1){let r=C();n(0,"div",6)(1,"form",7),m("ngSubmit",function(){p(r);let a=d();return g(a.addExercise())}),n(2,"div",8)(3,"select",9),M(4,ye,2,2,"option",28,O),o(),n(6,"div",10),x(7,"input",11)(8,"input",12),o(),n(9,"div",13),x(10,"input",14),o(),n(11,"div",15),x(12,"input",16)(13,"input",17),o(),n(14,"div",18),F(15,ve,2,0,"div",19)(16,Ee,4,1,"div",20)(17,Se,2,0,"div",19)(18,we,4,1,"div",20),o(),n(19,"button",21),c(20,"Add"),o()()()()}if(i&2){let r=d();s(1),u("formGroup",r.exerciseForm),s(3),I(r.adminCategories),s(11),h(15,r.isUploadedImage?-1:15),s(1),h(16,r.isUploadedImage?16:-1),s(1),h(17,r.isUploadedGifImage?-1:17),s(1),h(18,r.isUploadedGifImage?18:-1),s(1),u("disabled",r.exerciseForm.invalid)}}function Fe(i,t){if(i&1){let r=C();n(0,"tr",41)(1,"td",42),c(2),o(),n(3,"td",43),c(4),o(),n(5,"td",44),c(6),o(),n(7,"td",45),c(8),o(),n(9,"td",46),c(10),Z(11,"slice"),o(),n(12,"td",47),c(13),o(),n(14,"td",48),c(15),o(),n(16,"td",49),x(17,"img",50),o(),n(18,"td",49),x(19,"img",50),o(),n(20,"td",51)(21,"button",52),m("click",function(){let l=p(r).$implicit,_=d(2);return g(_.editExercise(l))}),c(22,"Edit"),o(),n(23,"button",53),m("click",function(){let l=p(r).$implicit,_=d(2);return g(_.deleteExercise(l))}),c(24,"Delete"),o()()()}if(i&2){let r=t.$implicit,e=t.$index,a=d(2);s(2),k(" \u2116 ",e+1," "),s(2),b(r.category.name),s(2),b(r.name),s(2),b(r.path),s(2),k(" ",ee(11,10,r.description,0,20)," "),s(3),b(r.duration),s(2),b(r.count),s(2),u("src",r.imagePath,P),s(2),u("src",r.gifImagePath,P),s(4),u("disabled",a.editStatus)}}function Oe(i,t){if(i&1&&(n(0,"div",29)(1,"table",30)(2,"tr",31)(3,"th",32),c(4,"\u2116"),o(),n(5,"th",33),c(6,"Category"),o(),n(7,"th",34),c(8,"Name"),o(),n(9,"th",35),c(10,"Path"),o(),n(11,"th",36),c(12,"Description"),o(),n(13,"th",37),c(14,"Duration"),o(),n(15,"th",38),c(16,"Count"),o(),n(17,"th",39),c(18,"Image"),o(),n(19,"th",39),c(20,"GifImage"),o(),n(21,"th",40),c(22,"Actions"),o()(),M(23,Fe,25,14,"tr",54,O),o()()),i&2){let r=d();s(23),I(r.adminExercises)}}var R=(()=>{let t=class t{constructor(e,a,l,_){this.categoryService=e,this.exerciseService=a,this.imageService=l,this.fb=_,this.adminCategories=[],this.adminExercises=[],this.isUploadedImage=!1,this.isUploadedGifImage=!1,this.isFormOpen=!1,this.editStatus=!1;let w=new Date,v=new Date(w);v.setDate(w.getDate()),this.todaysDate=v.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}ngOnInit(){this.initExerciseForm(),this.loadCategories(),this.loadExercises()}initExerciseForm(){this.exerciseForm=this.fb.group({category:[null,f.required],name:[null,f.required],path:[null,f.required],description:[null,f.required],duration:[null,f.required],count:[null,f.required],imagePath:[null,f.required],gifImagePath:[null,f.required],completed:!1,date:this.todaysDate})}toggleExerciseFormAndTable(){this.isFormOpen=!this.isFormOpen}loadCategories(){this.categoryService.getAllCategories().subscribe(e=>{this.adminCategories=e,this.exerciseForm.patchValue({category:this.adminCategories[0].id})})}loadExercises(){this.exerciseService.getAllExercises().subscribe(e=>{this.adminExercises=e})}addExercise(){this.editStatus?this.exerciseService.updateExercise(this.exerciseForm.value,this.currentCategoryId).then(()=>{this.loadExercises(),this.editStatus=!1,this.isFormOpen=!1}):this.exerciseService.createExercise(this.exerciseForm.value).then(()=>{this.loadExercises(),this.exerciseForm.reset(),this.editStatus=!1,this.isFormOpen=!1,this.isUploadedImage=!1,this.isUploadedGifImage=!1})}editExercise(e){this.exerciseForm.patchValue({category:e.category,name:e.name,path:e.path,description:e.description,duration:e.duration,count:e.count,imagePath:e.imagePath,gifImagePath:e.gifImagePath}),this.editStatus=!0,this.isFormOpen=!0,this.isUploadedImage=!0,this.isUploadedGifImage=!0,this.currentCategoryId=e.id}deleteExercise(e){this.exerciseService.deleteExercise(e.id).then(()=>{this.loadExercises()})}uploadImage(e){let a=e.target.files[0];this.imageService.uploadFile("images",a.name,a).then(l=>{this.exerciseForm.patchValue({imagePath:l}),this.isUploadedImage=!0}).catch(l=>{console.log(l)})}uploadGifImage(e){let a=e.target.files[0];this.imageService.uploadFile("images",a.name,a).then(l=>{this.exerciseForm.patchValue({gifImagePath:l}),this.isUploadedGifImage=!0}).catch(l=>{console.log(l)})}deleteImage(){this.imageService.deleteUploadFile(this.valueByControl("imagePath")).then(()=>{this.isUploadedImage=!1,this.exerciseForm.patchValue({imagePath:null})}).catch(e=>{console.log(e)})}deleteGifImage(){this.imageService.deleteUploadFile(this.valueByControl("gifImagePath")).then(()=>{this.isUploadedGifImage=!1,this.exerciseForm.patchValue({gifImagePath:null})}).catch(e=>{console.log(e)})}valueByControl(e){return this.exerciseForm.get(e)?.value}};t.\u0275fac=function(a){return new(a||t)(y(q),y(se),y(L),y(B))},t.\u0275cmp=E({type:t,selectors:[["app-admin-exercise"]],standalone:!0,features:[S],decls:7,vars:2,consts:[[1,"container"],[1,"wrapper"],[1,"wrapper__toggle"],[1,"wrapper__add_exercise",3,"click"],["class","form__block"],["class","exercise__block"],[1,"form__block"],[1,"form",3,"formGroup","ngSubmit"],[1,"form__exercise_category"],["formControlName","category",1,"exercise__select","exercise__input"],[1,"form__exercise_header"],["formControlName","name","type","text","id","name","placeholder","*Name",1,"form__exercise_name","exercise__input"],["formControlName","path","type","text","id","path","placeholder","*Path",1,"form__exercise_path","exercise__input"],[1,"form__exercise_main"],["formControlName","description","type","text","placeholder","*Description",1,"form__exercise_description","exercise__input"],[1,"form__exercise_footer"],["formControlName","duration","type","text","placeholder","*Duration",1,"form__exercise_duration","exercise__input"],["formControlName","count","type","number","placeholder","*Count",1,"form__exercise_count","exercise__input"],[1,"form__image_wrapper"],["class","form__exercise_upload"],["class","form__exercise_load"],["type","submit",1,"form__exercise_button",3,"disabled"],[1,"exercise__select_category",3,"ngValue"],[1,"form__exercise_upload"],["type","file","id","formFile",1,"exercise__upload_file",3,"change"],[1,"form__exercise_load"],["alt","",1,"exercise__load_img",3,"src"],["type","button",1,"exercise__load_button",3,"click"],["class","exercise__select_category",3,"ngValue"],[1,"exercise__block"],[1,"exercise__table"],[1,"table__header"],[1,"header__sharp","table__item"],[1,"header__category","table__item"],[1,"header__name","table__item"],[1,"header__way","table__item"],[1,"header__description","table__item"],[1,"header__duration","table__item"],[1,"header__count","table__item"],[1,"header__image","table__item"],[1,"header__actions","table__item"],[1,"table__main"],[1,"main__sharp","table__item"],[1,"main__category","table__item"],[1,"main__name","table__item"],[1,"main__path","table__item"],[1,"main__desc","table__item"],[1,"main__duration","table__item"],[1,"main__count","table__item"],[1,"main__image","table__item"],["alt","",1,"main__image_item",3,"src"],[1,"main__actions","table__item"],["type","button",1,"actions__edit","actions__btn",3,"click"],["type","button",1,"actions__delete","actions__btn",3,"disabled","click"],["class","table__main"]],template:function(a,l){a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m("click",function(){return l.toggleExerciseFormAndTable()}),c(4,"Add Exercise"),o()(),F(5,Pe,21,6,"div",4)(6,Oe,25,0,"div",5),o()()),a&2&&(s(5),h(5,l.isFormOpen?5:-1),s(1),h(6,l.isFormOpen?-1:6))},dependencies:[$,j,ce,le,D,re,ae,N,U,G,z,oe],styles:[".wrapper__toggle[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.wrapper__add_exercise[_ngcontent-%COMP%]{width:120px;height:38px;background:#9ECEFF;border:none;border-radius:6px;cursor:pointer;color:#212121;font-size:16px}.form__block[_ngcontent-%COMP%]{margin-top:20px}.form__exercise_header[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}.form__exercise_name[_ngcontent-%COMP%], .form__exercise_path[_ngcontent-%COMP%]{width:49%}.form__exercise_main[_ngcontent-%COMP%], .form__exercise_description[_ngcontent-%COMP%]{width:100%}.form__exercise_footer[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}.form__exercise_duration[_ngcontent-%COMP%], .form__exercise_count[_ngcontent-%COMP%], .form__exercise_upload[_ngcontent-%COMP%]{width:49%}.form__exercise_button[_ngcontent-%COMP%]{width:140px;height:42px;background:#007EFE;border:none;border-radius:6px;cursor:pointer;color:#fff;font-size:20px;margin-top:20px}.form__image_wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.exercise__select[_ngcontent-%COMP%]{width:100%}.exercise__input[_ngcontent-%COMP%]{height:56px;border:1px solid #f5f5f5;border-radius:10px;background:none;padding:0 12px;font-size:16px;color:#212121;margin-bottom:20px;outline-color:#007efe}.exercise__upload_file[_ngcontent-%COMP%]{width:100%;height:56px;border:1px solid lightgray;border-radius:10px;background:none;padding:16px 12px 0;font-size:16px;color:#212121;margin-bottom:20px}.exercise__load_img[_ngcontent-%COMP%]{height:100px;margin-top:20px}.exercise__load_button[_ngcontent-%COMP%]{width:80px;height:40px;background:red;color:#fff;font-size:16px;border:none;border-radius:4px;cursor:pointer}.exercise__block[_ngcontent-%COMP%]{margin-top:20px;max-height:480px;overflow:scroll}.exercise__block[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.exercise__table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table__header[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #9ECEFF}.table__item[_ngcontent-%COMP%]{padding:20px 0;text-align:left}.table__main[_ngcontent-%COMP%]{border-bottom:2px solid #f5f5f5}.main__image_item[_ngcontent-%COMP%]{height:50px}.main__actions[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;gap:10px}.actions__btn[_ngcontent-%COMP%]{font-weight:700;color:#007efe;font-size:16px;background:none;border:none;text-align:left;cursor:pointer}"]});let i=t;return i})();function Me(i,t){if(i&1){let r=C();n(0,"div",6)(1,"form",7),m("ngSubmit",function(){p(r);let a=d();return g(a.addCategory())}),n(2,"div",8),x(3,"input",9),o(),n(4,"button",10),c(5),o()()()}if(i&2){let r=d();s(1),u("formGroup",r.categoryForm),s(3),u("disabled",r.categoryForm.invalid),s(1),b(r.editStatus?"Save":"Add")}}function Ie(i,t){if(i&1){let r=C();n(0,"tr",17)(1,"td",18),c(2),o(),n(3,"td",19),c(4),o(),n(5,"td",20)(6,"button",21),m("click",function(){let l=p(r).$implicit,_=d(2);return g(_.editCategory(l))}),c(7,"Edit"),o(),n(8,"button",22),m("click",function(){let l=p(r).$implicit,_=d(2);return g(_.deleteCategory(l))}),c(9,"Delete"),o()()()}if(i&2){let r=t.$implicit;s(2),k(" \u2116 ",r.id," "),s(2),b(r.name)}}function ke(i,t){if(i&1&&(n(0,"div",11)(1,"table",12)(2,"tr",13)(3,"th",14),c(4,"\u2116"),o(),n(5,"th",15),c(6,"\u041D\u0430\u0437\u0432\u0430"),o(),n(7,"th",16),c(8,"\u0414\u0456\u0457"),o()(),M(9,Ie,10,2,"tr",23,O),o()()),i&2){let r=d();s(9),I(r.adminCategories)}}var H=(()=>{let t=class t{constructor(e,a,l){this.categoryService=e,this.imageService=a,this.fb=l,this.adminCategories=[],this.editStatus=!1,this.isUploaded=!1,this.uploadPercent=0,this.isFormOpen=!1}ngOnInit(){this.initCategoryForm(),this.loadCategories()}toggleCategoryFormAndTable(){this.isFormOpen=!this.isFormOpen}initCategoryForm(){this.categoryForm=this.fb.group({name:[null,f.required]})}loadCategories(){this.categoryService.getAllCategories().subscribe(e=>{this.adminCategories=e})}addCategory(){this.editStatus?this.categoryService.updateCategory(this.categoryForm.value,this.currentCategoryId).then(()=>{this.loadCategories(),this.isFormOpen=!1}):(this.editStatus=!1,this.categoryService.createCategory(this.categoryForm.value).then(()=>{this.loadCategories(),this.isFormOpen=!1})),this.editStatus=!1,this.categoryForm.reset(),this.isUploaded=!1,this.uploadPercent=0}editCategory(e){this.categoryForm.patchValue({name:e.name}),this.isFormOpen=!0,this.editStatus=!0,this.currentCategoryId=e.id,this.isUploaded=!0}deleteCategory(e){this.categoryService.deleteCategory(e.id).then(()=>{this.loadCategories()})}};t.\u0275fac=function(a){return new(a||t)(y(q),y(L),y(B))},t.\u0275cmp=E({type:t,selectors:[["app-admin-category"]],standalone:!0,features:[S],decls:7,vars:2,consts:[[1,"container"],[1,"wrapper"],[1,"wrapper__toggle"],[1,"wrapper__add_category",3,"click"],["class","category__form"],["class","table__wrapper"],[1,"category__form"],[1,"form",3,"formGroup","ngSubmit"],[1,"category__name"],["formControlName","name","type","text","id","name","placeholder","*Name",1,"category__form_name"],["type","submit",1,"category__form_button",3,"disabled"],[1,"table__wrapper"],[1,"table"],[1,"table__header"],[1,"header__sharp","table__item"],[1,"header__name","table__item"],[1,"header__actions","table__item"],[1,"table__main"],[1,"main__sharp","table__item"],[1,"main__name","table__item"],[1,"main__actions","table__item"],["type","button",1,"actions__edit","actions__btn",3,"click"],["type","button",1,"actions__delete","actions__btn",3,"click"],["class","table__main"]],template:function(a,l){a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m("click",function(){return l.toggleCategoryFormAndTable()}),c(4,"Add category"),o()(),F(5,Me,6,3,"div",4)(6,ke,11,0,"div",5),o()()),a&2&&(s(5),h(5,l.isFormOpen?5:-1),s(1),h(6,l.isFormOpen?-1:6))},dependencies:[$,j,D,N,U,G,z],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{box-sizing:border-box;height:100%}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:inherit;margin:0;padding:0;font-family:Comfortaa,sans-serif}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%], ol[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}.wrapper__toggle[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.wrapper__add_category[_ngcontent-%COMP%]{width:120px;height:38px;background:#9ECEFF;border:none;border-radius:6px;cursor:pointer;color:#212121;font-size:16px}.category__form_name[_ngcontent-%COMP%]{width:100%;height:56px;border:1px solid #f5f5f5;border-radius:10px;background:none;padding:0 12px;font-size:16px;color:#212121;margin-bottom:20px;outline-color:#007efe}.category__form_button[_ngcontent-%COMP%]{width:140px;height:42px;background:#007EFE;border:none;border-radius:6px;cursor:pointer;color:#fff;font-size:20px}.category__name[_ngcontent-%COMP%]{margin-top:20px}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table__wrapper[_ngcontent-%COMP%]{width:100%}.table__header[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid #9ECEFF}.table__item[_ngcontent-%COMP%]{padding:20px 0;text-align:left}.table__main[_ngcontent-%COMP%]{border-bottom:2px solid #f5f5f5}.main__actions[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;gap:10px}.actions__edit[_ngcontent-%COMP%], .actions__delete[_ngcontent-%COMP%]{font-weight:700;color:#007efe;font-size:16px;background:none;border:none;text-align:left;cursor:pointer}"]});let i=t;return i})();var Ve=[{path:"",component:ue,children:[{path:"exercise",component:R},{path:"category",component:H}]}],fe=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=T({type:t}),t.\u0275inj=A({imports:[J.forChild(Ve),J]});let i=t;return i})();var tt=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=T({type:t}),t.\u0275inj=A({imports:[te,fe,R,H]});let i=t;return i})();export{tt as AdminModule};
