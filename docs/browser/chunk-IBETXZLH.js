import{a as w}from"./chunk-FAUL3WKI.js";import{a as se,b as ce}from"./chunk-YZAOB4T7.js";import{a as O}from"./chunk-E4ASYMHY.js";import{j as ne,k as re,m as oe}from"./chunk-JIYL2G2E.js";import{A as ee,B as te,C as k,F as ie,v as Q,w as X,y as Y,z as Z}from"./chunk-5EGWKPCX.js";import{$ as R,A as N,Aa as q,B as z,Da as G,Ga as K,K as $,Ka as U,Q as p,R as _,W as F,X as B,_ as V,a as I,aa as u,ba as f,ca as g,da as o,ea as s,fa as h,ia as H,la as W,ma as J,oa as l,pa as x,q as T,qa as j,r as y,sa as v,t as L,ua as D,v as b,va as S,w as C}from"./chunk-QJIXC3RR.js";var ae=(()=>{let i=class i{constructor(e){this.afs=e,this.scheduleCollection=Q(this.afs,"schedule")}ngOnInit(){}getAllScheduleDays(){return Y(this.scheduleCollection,{idField:"id"})}getOneScheduleDay(e){let t=k(this.afs,`schedule/${e}`);return Z(t,{idField:"id"})}setScheduleDay(e){return ee(this.scheduleCollection,e)}updateScheduleDay(e,t){let n=k(this.afs,`schedule/${t}`);return ie(n,I({},e))}deleteScheduleDay(e){let t=k(this.afs,`schedule/${e}`);return te(t)}};i.\u0275fac=function(t){return new(t||i)(L(X))},i.\u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();function he(r,i){if(r&1&&(o(0,"div",10)(1,"div",11),h(2,"div",12),s(),o(3,"h5",13),l(4),D(5,"slice"),s()()),r&2){let d=i.$implicit;p(2),B("height",d.percentCount,"%"),p(2),x(S(5,3,d.nameOfDay,0,3))}}var le=(()=>{let i=class i{constructor(e,t){this.userExerciseService=e,this.schedulerService=t,this.lengthOfAllUserExercises=[],this.nameDaysOfWeek=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.percentCount=0,this.daysOfWeek=[],this.daysOfCurrentWeek=[],this.currentDate=new Date,this.todaysDate=this.currentDate.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})}ngOnInit(){this.setTodaysDay(),this.getCurrentWeek(),this.getUserActivity(),this.getDaysOfCurrentWeek(),this.setDaysForSchedule(),this.getPercentOfUserActivity(),this.setPercentForScheduleDays()}getCurrentWeek(){let e=new Date,t=e.getDay(),n=new Date(e);n.setDate(e.getDate()-t),new Date(n).setDate(n.getDate()+6);for(let c=0;c<7;c++){let m=new Date(n);m.setDate(n.getDate()+c);let M=m.toLocaleDateString("en-US",{weekday:"long"}),A={date:m.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),nameOfDay:M,percentCount:0};this.daysOfWeek.push(A)}}getUserActivity(){this.userExerciseService.getAllUserExercise().subscribe(e=>{this.lengthOfAllUserExercises=e;let t=this.lengthOfAllUserExercises.filter(n=>n.completed===!0);this.percentCount=t.length/this.lengthOfAllUserExercises.length*100,this.schedulerService.getAllScheduleDays().subscribe(n=>{let a=n.find(c=>c.date===this.todaysDate);if(a){a.percentCount=this.percentCount;let c=this.daysOfWeek.findIndex(m=>m.date===this.todaysDate);c!==-1&&(this.daysOfWeek[c].percentCount=this.percentCount),this.schedulerService.updateScheduleDay(a,a.id).then(()=>{})}})})}getDaysOfCurrentWeek(){let e=localStorage.getItem("daysOfCurrentWeek");if(e){let t=JSON.parse(e);console.log(t)}}setDaysForSchedule(){let e=new Date,t=e.getDay(),n=new Date(e);n.setDate(e.getDate()-t),new Date(n).setDate(n.getDate()+6);for(let c=0;c<7;c++){let m=new Date(n);m.setDate(n.getDate()+c);let M=m.toLocaleDateString("en-US",{weekday:"long"}),A={date:m.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),nameOfDay:M,percentCount:0};this.daysOfWeek.push(A)}console.log(this.daysOfWeek)}setTodaysDay(){let e={date:this.todaysDate,nameOfDay:this.nameDaysOfWeek[this.currentDate.getDay()],percentCount:0};this.schedulerService.getAllScheduleDays().subscribe(t=>{t.length===0?this.schedulerService.setScheduleDay(e).then(()=>{}):t.some(a=>a.date===this.todaysDate)||this.schedulerService.setScheduleDay(e).then(()=>{})})}getPercentOfUserActivity(){this.userExerciseService.getAllUserExercise().subscribe(e=>{this.lengthOfAllUserExercises=e;let t=this.lengthOfAllUserExercises.filter(n=>n.completed===!0);this.percentCount=t.length/this.lengthOfAllUserExercises.length*100,this.schedulerService.getAllScheduleDays().subscribe(n=>{let a=n.map(c=>(this.todaysDate===c.date&&(c.percentCount=this.percentCount,this.schedulerService.updateScheduleDay(c,c.id)),Promise.resolve()));Promise.all(a).then(()=>{})})})}setPercentForScheduleDays(){this.schedulerService.getAllScheduleDays().subscribe(e=>{e.forEach(t=>{this.daysOfWeek.forEach(n=>{n.nameOfDay===t.nameOfDay&&(n.percentCount=t.percentCount)})})})}};i.\u0275fac=function(t){return new(t||i)(_(w),_(ae))},i.\u0275cmp=b({type:i,selectors:[["app-schedule"]],standalone:!0,features:[v],decls:18,vars:0,consts:[[1,"block"],[1,"block__wrapper"],[1,"block__top_header"],[1,"top__header_title"],[1,"top__header_category"],[1,"block__wrapper_bottom"],[1,"block__bottom_main"],[1,"bottom__main_line"],[1,"block__wrapper_top"],[1,"block__top_schedule"],[1,"block__top_col"],[1,"top__col_wrapper"],[1,"col__wrapper_item"],[1,"top__col_text"],["class","block__top_col"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),l(4,"Training Analytics"),s(),o(5,"div",4),l(6,"Weekly"),s()(),o(7,"div",5)(8,"div",6),h(9,"div",7)(10,"div",7)(11,"div",7)(12,"div",7)(13,"div",7),s(),o(14,"div",8)(15,"div",9),f(16,he,6,7,"div",14,u),s()()()()()),t&2&&(p(16),g(n.daysOfWeek))},dependencies:[O],styles:[".block[_ngcontent-%COMP%]{width:590px;height:340px;border:1px solid #f5f5f5;border-radius:10px}.block__wrapper[_ngcontent-%COMP%]{height:100%}.block__wrapper_bottom[_ngcontent-%COMP%]{height:248px;position:relative}.block__wrapper_top[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.block__bottom_main[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-direction:column}.block__top_header[_ngcontent-%COMP%]{padding:30px;width:100%;display:flex;align-items:center;justify-content:space-between}.block__top_schedule[_ngcontent-%COMP%]{padding:0 30px;width:586px;display:flex;align-items:center;justify-content:space-between}.block__top_col[_ngcontent-%COMP%]{width:50px;height:230px;display:flex;align-items:center;justify-content:space-between;flex-direction:column}.bottom__main_line[_ngcontent-%COMP%]{width:100%;height:50px;border-top:1px dashed #f5f5f5}.top__header_category[_ngcontent-%COMP%]{width:100px;height:30px;border-radius:20px;background:#9ECEFF;display:flex;align-items:center;justify-content:center}.top__col_wrapper[_ngcontent-%COMP%]{height:200px;width:100%;display:flex;align-items:flex-end}.col__wrapper_item[_ngcontent-%COMP%]{width:100%;background:#9ECEFF;border-radius:10px}.today[_ngcontent-%COMP%]{color:red}"]});let r=i;return r})();function ue(r,i){if(r&1&&(o(0,"option",17),l(1),s()),r&2){let d=i.$implicit;F("ngValue",d),p(1),x(d.name)}}function fe(r,i){r&1&&(o(0,"span"),l(1,"..."),s())}function ge(r,i){if(r&1){let d=H();o(0,"div",18)(1,"div",19)(2,"div",20),l(3),s(),o(4,"div",21)(5,"h3",22),l(6),D(7,"slice"),V(8,fe,2,0,"span"),s(),o(9,"p",23),l(10),s()(),o(11,"div",24)(12,"button",25),W("click",function(){let n=N(d).$implicit,a=J();return z(a.addExerciseToUser(n))}),l(13,"Add Exercise"),s()()(),o(14,"div",26),h(15,"img",27),s()()}if(r&2){let d=i.$implicit;p(3),x(d.category.name),p(3),j(" ",S(7,5,d.name,0,10)," "),p(2),R(8,d.name.length>=10?8:-1),p(2),j("Duration - ",d.duration," min"),p(5),F("src",d.imagePath,$)}}var P=(()=>{let i=class i{constructor(e,t,n,a){this.exerciseService=e,this.categoryService=t,this.userExerciseService=n,this.router=a,this.userExercises=[],this.userAllCategories=[],this.eventSubscription=this.router.events.subscribe(c=>{c instanceof G&&(this.getAllUserExercise(),this.getAllUserCategories())})}ngOnDestroy(){this.eventSubscription.unsubscribe()}getAllUserExercise(){this.exerciseService.getAllExercises().subscribe(e=>{this.userExercises=e})}getAllUserCategories(){this.categoryService.getAllCategories().subscribe(e=>{this.userAllCategories=e})}onCategoryChange(e){let t=e.target.value;t==="ALL"?this.exerciseService.getAllExercises().subscribe(n=>{this.userExercises=n}):this.exerciseService.getAllExercisesByCategory(t).subscribe(n=>{this.userExercises=n})}addExerciseToUser(e){this.userExerciseService.setUserExercise(e).then(()=>{})}};i.\u0275fac=function(t){return new(t||i)(_(se),_(ce),_(w),_(K))},i.\u0275cmp=b({type:i,selectors:[["app-home"]],standalone:!0,features:[v],decls:26,vars:0,consts:[[1,"container"],[1,"wrapper"],[1,"wrapper__main"],[1,"wrapper__main_header"],[1,"main__header_title"],[1,"main__header_date"],[1,"wrapper__main_blocks"],[1,"main__blocks_one"],[1,"main__blocks_two"],[1,"wrapper__main_schedule"],[1,"wrapper__exercise_block"],[1,"exercise__block_inner"],[1,"exercise__block_header"],[1,"exercise__header_title"],["id","",1,"exercise__header_category",3,"change"],["value","ALL",1,"header__category_title"],[1,"exercise__block_main"],[1,"header__category_title",3,"ngValue"],[1,"exercise__main_item"],[1,"exercise__item_info"],[1,"item__info_category"],[1,"item__info_text"],[1,"info__text_name"],[1,"info__text_duration"],[1,"item__info_button"],["type","button",1,"info__button",3,"click"],[1,"exercise__item_banner"],["alt","",1,"item__banner_image",3,"src"],["class","header__category_title",3,"ngValue"],["class","exercise__main_item"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),l(5,"Welcome Nazar!"),s(),o(6,"p",5),l(7,"3 Decembar, Sunday"),s()(),o(8,"div",6),h(9,"div",7)(10,"div",8),s(),o(11,"div",9),h(12,"app-schedule"),s()(),o(13,"div",10)(14,"div",11)(15,"div",12)(16,"h2",13),l(17,"Exercises"),s(),o(18,"select",14),W("change",function(c){return n.onCategoryChange(c)}),o(19,"option",15),l(20,"ALL"),s(),f(21,ue,2,2,"option",28,u),s()(),o(23,"div",16),f(24,ge,16,9,"div",29,u),s()()()()()),t&2&&(p(21),g(n.userAllCategories),p(3),g(n.userExercises))},dependencies:[le,O,oe,ne,re],styles:[".container[_ngcontent-%COMP%]{width:100%;padding:30px}.wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.wrapper__main[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;flex-direction:column}.wrapper__main_blocks[_ngcontent-%COMP%]{width:590px;height:180px;background:red;margin-top:20px}.wrapper__main_schedule[_ngcontent-%COMP%]{margin-top:20px}.wrapper__exercise_block[_ngcontent-%COMP%]{width:360px;height:620px;background:#f5f5f5;border-radius:10px;padding:20px}.exercise__block_header[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}.exercise__block_main[_ngcontent-%COMP%]{height:540px;width:100%;display:flex;align-items:center;flex-direction:column;gap:12px;margin-top:12px;overflow:scroll}.exercise__block_main[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.exercise__header_title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#212121}.exercise__header_category[_ngcontent-%COMP%]{width:80px;height:32px;background:#9ECEFF;border-radius:20px;border:none;outline:none;color:#007efe;font-weight:500}.exercise__main_item[_ngcontent-%COMP%]{width:320px;height:140px;background:#fff;border-radius:10px;display:flex;align-items:center;justify-content:space-between;cursor:pointer}.exercise__item_info[_ngcontent-%COMP%]{height:100%;display:flex;align-items:flex-start;justify-content:space-between;flex-direction:column;padding:10px}.exercise__item_banner[_ngcontent-%COMP%]{width:140px;height:140px}.header__category_title[_ngcontent-%COMP%]{color:#007efe;font-weight:500;font-size:14px}.item__info_category[_ngcontent-%COMP%]{width:50px;height:20px;background:#9ECEFF;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;color:#007efe}.item__info_text[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;flex-direction:column;gap:4px}.item__banner_image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;border-radius:10px}.info__text_name[_ngcontent-%COMP%]{font-size:20px}.info__text_duration[_ngcontent-%COMP%]{font-size:13px;color:#7e7e7e}.info__button[_ngcontent-%COMP%]{width:100px;height:30px;background:#007EFE;border-radius:4px;border:none;outline:none;cursor:pointer;font-size:14px;color:#fff}"]});let r=i;return r})();var xe=[{path:"",component:P}],de=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=C({type:i}),i.\u0275inj=y({imports:[U.forChild(xe),U]});let r=i;return r})();var ze=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=C({type:i}),i.\u0275inj=y({imports:[q,de,P]});let r=i;return r})();export{ze as HomeModule};
